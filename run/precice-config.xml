<?xml version="1.0"?>

<precice-configuration>

 <log>
    <sink type="stream" output="stdout"  filter= "(%Severity% > debug) or (%Severity% >= trace and %Module% contains SolverInterfaceImpl)"  enabled="true" /> 
    <sink type="stream" output="stdout"  enabled="true" /> 
  </log>

  <solver-interface dimensions="2">
  
    <data:scalar name="Temperature"/>
    <data:scalar name="Heat-Flux"/>
  
    <mesh name="NumSimMesh"> 
      <use-data name="Temperature"/> 
      <use-data name="Heat-Flux"/> 
    </mesh>
    
    <!--
    <mesh name="SolidSolverDummyMesh"> 
      <use-data name="Temperature"/> 
      <use-data name="Heat-Flux"/>
    </mesh>  
    -->
    <mesh name="SolidSolverDummyMesh">
      <use-data name="Temperature" />
      <use-data name="Heat-Flux" />
    </mesh>

    <participant name="NumSim"> 
      <use-mesh name="NumSimMesh" provide="yes"/> 
      <!--
      <use-mesh name="SolidSolverDummyMesh" from="SolidSolverDummy"/> 
      -->
      
      <read-data name="Heat-Flux" mesh="NumSimMesh"/> 
      <write-data name="Temperature" mesh="NumSimMesh"/> 
    </participant>
    
    <participant name="SolidSolverDummy"> 
      <use-mesh name="SolidSolverDummyMesh" provide="yes"/> 
      <use-mesh name="NumSimMesh" from="NumSim"/> 
      
      <read-data name="Temperature" mesh="SolidSolverDummyMesh"/> 
      <write-data name="Heat-Flux" mesh="SolidSolverDummyMesh"/> 
      
      <mapping:nearest-neighbor direction="read" from="NumSimMesh" to="SolidSolverDummyMesh" constraint="consistent"/>
      <mapping:nearest-neighbor direction="write" from="SolidSolverDummyMesh" to="NumSimMesh" constraint="consistent"/>  
    </participant>
  
    <m2n:sockets from="NumSim" to="SolidSolverDummy" distribution-type="gather-scatter"/>

    <coupling-scheme:serial-explicit> 
      <participants first="NumSim" second="SolidSolverDummy"/> 
      <max-time value="10.0"/> 
      <timestep-length value="0.01"/> 
      <exchange data="Heat-Flux" mesh="NumSimMesh" from="SolidSolverDummy" to="NumSim" initialize="yes"/>
      <exchange data="Temperature" mesh="NumSimMesh" from="NumSim" to="SolidSolverDummy" />
    </coupling-scheme:serial-explicit>

  </solver-interface>
</precice-configuration>
